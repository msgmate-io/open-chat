<!DOCTYPE html>
    <html lang="en" data-theme="light">
      <head>
        <link rel="stylesheet" type="text/css" href="https://tbscode.github.io/django-vike-chat/assets/static/onPageTransitionStart.c2626fb7.css">
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Opensource Chat Interface, Backend &amp; API" />
        <link rel="icon" href="https://tbscode.github.io/django-vike-chat/assets/static/logo.ac30c54c.png">
        <title>Open Chat Interface</title>
      </head>
      <body>
        <div id="react-root"><header class="sticky border-b-[1px] top-0 z-40 w-full backdrop-blur-xl dark:border-b-slate-700 dark:bg-background"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="relative z-10 flex max-w-max flex-1 items-center justify-center mx-auto"><div style="position:relative"><ul data-orientation="horizontal" class="group flex-1 list-none items-center space-x-1 container h-14 px-4 w-screen flex justify-between" dir="ltr"><li class="font-bold flex"><a href="https://tbscode.github.io/django-vike-chat/" class="ml-2 font-bold text-xl flex">ðŸ’¬ <!-- -->Open Chat Interface</a></li><span class="flex md:hidden"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2e:" data-state="closed" class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu flex md:hidden h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line>Menu Icon</svg></button></span><nav class="hidden md:flex gap-2"><a href="https://tbscode.github.io/django-vike-chat/" class="text-[17px] inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2">ðŸ”™</a></nav><div class="hidden md:flex gap-2 justify-center content-center items-center"><select class="select select-sm w-full"><option value="light" selected="">light</option><option value="dark">dark</option><option value="cupcake">cupcake</option><option value="retro">retro</option></select></div></ul></div><div class="absolute left-0 top-full flex justify-center"></div></nav></header><div class="border-b"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[320px_minmax(0,1fr)] md:text-xl lg:gap-10"><aside class="fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.7rem)] w-full shrink-0 md:sticky md:block bg-base-200 rounded-xl"><div dir="ltr" class="h-full py-6 pl-8 pr-6 lg:py-8" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><div class="w-full"><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 font-semibold">Getting Started</h4><div class="grid grid-flow-row auto-rows-max"><a href="/docs/" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Introduction</a><a href="/docs/dev-docker" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Docker Development</a><a href="/docs/workflows" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Github Actions</a><a href="/docs/dev-capacitor" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Capacitor Native App</a><a href="/docs/helm-deployment" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Helm deployment</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 font-semibold">Frontend</h4><div class="grid grid-flow-row auto-rows-max"><a href="/docs/frontend" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Introduction</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 font-semibold">Backend</h4><div class="grid grid-flow-row auto-rows-max"><a href="/docs/backend" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Introduction</a></div></div></div></div></aside><div class="article prose pt-10"><h1>Github Actions CI/CD</h1>
<blockquote>
<p>This section is WIP</p>
</blockquote>
<p>A collection of github actions and a k8s cluster maybe be used to manage the CI/CD process.</p>
<h2>Running workflows locally using <code>act</code></h2>
<ol>
<li>Fill <code>.secrets</code></li>
</ol>
<p>Depending on the workflow you might need to add <code>GITHUB_TOKEN</code> - scoped depending on your task objective - to the <code>.env</code> file.</p>
<ol start="2">
<li><code>act workflow_dispatch --secret-file .env -W .github/workflows/&lt;workflow&gt;.yml</code></li>
</ol>
<p>Incase you require to provide dispatch params, create a <code>event.json</code> and use the <code>--eventpath</code> flag.
But most of the time just using <code>--input</code> should be sufficient.</p>
<p>e.g.: this will install the open-chat helm chart to any kubernetes cluster:</p>
<p><code>.secrets</code>:</p>
<pre><code class="language-bash">BOT_TOKEN=&quot;change me&quot;
REGISTRY_HOST=&quot;change me&quot;
REGISTRY_USER=&quot;change me&quot;
REGISTRY_PASSWORD=&quot;change me&quot;
DEPLOYMENT_VALUES_B64=&quot;change me&quot;
INGRESS_HOST=&quot;change me&quot;
</code></pre>
<blockquote>
<p><a href="https://tbscode.github.io/django-vike-chat/docs/example-values-helm-install">see here</a> for an exmple <code>values.yaml</code> setup, use <code>base64 -w 0</code> to encode it.</p>
</blockquote>
<pre><code class="language-bash">act workflow_dispatch --input BUILD_TARGET=backend --secret-file .secrets -W .github/workflows/build-docker-image.yaml
act workflow_dispatch --input BUILD_TARGET=frontend --secret-file .secrets -W .github/workflows/build-docker-image.yaml
act workflow_dispatch --input DEPLOYMENT_TARGET=staging --input FRONTEND_IMAGE_URL=&quot;change me&quot; --input BACKEND_IMAGE_URL=&quot;change me&quot; --secret-file .secrets -W .github/workflows/install-helm.yaml
</code></pre>
<h1>Open Chat Repo CI/CD</h1>
<p>Section discusses how the CI/CD process is managed for the open-chat repo / how it can be managed in a fork.</p>
<h2>Setting up environment</h2>
<blockquote>
<p>As this is a public repo it has access to <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment">github environments</a>
If you are using this in context of a private repo you may need to adjust the github actions.</p>
</blockquote>
<h3>Environment Secrets</h3>
<p>You are required to configure the following:</p>
<ul>
<li><code>KUBECONFIG_B64</code>: a base64 encoded kubeconfig file</li>
<li><code>REGISTRY_PASSWORD</code>: a docker registry password</li>
<li><code>REGISTRY_HOST</code>: a docker registry host</li>
<li><code>REGISTRY_USER</code>: a docker registry user</li>
<li><code>DEPLOYMENT_VALUES_B64</code>: a base64 encoded helm values file ( can be deleted after installation )</li>
<li><code>BOT_TOKEN</code>: a scoped github token of bot account</li>
<li><code>INGRESS_HOST</code>: the ingress host for the k8s cluster</li>
</ul>
<p>Since they are environment scoped, all workflows accessing this enviroment require prior approval of <a href="https://github.com/tbscode" target="_blank">tbscode</a> or another autorized maintainer.</p></div></div></div></div>
        <script id="vike_pageContext" type="application/json">{"pageProps":"!undefined","routeParams":{"page":"workflows"},"initalReduxState":{"frontend":{"theme":"light","sessionId":false,"xcsrfToken":"!undefined","routeParams":{"page":"workflows"}},"pageProps":{"routeParams":{"page":"workflows"},"search":{}}},"search":"!undefined","abortReason":"!undefined","_urlRewrite":null,"_urlRedirect":"!undefined","abortStatusCode":"!undefined","_abortCall":"!undefined","_pageContextInitIsPassedToClient":"!undefined","_pageId":"/pages/docs/@page","data":"!undefined"}</script>
        <script src="https://tbscode.github.io/django-vike-chat/assets/entries/entry-client-routing.9fa4ffe0.js" type="module" async></script>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/entries/pages_docs_-page.5cca9c0b.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-5736cc52.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-1f9de056.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-5fbe52d1.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-7f37d256.js" as="script" type="text/javascript" crossorigin>
      </body>
    </html>