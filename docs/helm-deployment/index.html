<!DOCTYPE html>
    <html lang="en" data-theme="light">
      <head>
        <link rel="stylesheet" type="text/css" href="https://tbscode.github.io/django-vike-chat/assets/static/onPageTransitionStart.58adfa99.css">
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Opensource Chat Interface, Backend &amp; API" />
        <link rel="icon" href="https://tbscode.github.io/django-vike-chat/assets/static/logo.ac30c54c.png">
        <title>Open Chat Interface</title>
      </head>
      <body>
        <div id="react-root"><header class="sticky border-b-[1px] top-0 z-40 w-full backdrop-blur-xl dark:border-b-slate-700 dark:bg-background"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="relative z-10 flex max-w-max flex-1 items-center justify-center mx-auto"><div style="position:relative"><ul data-orientation="horizontal" class="group flex-1 list-none items-center space-x-1 container h-14 px-4 w-screen flex justify-between" dir="ltr"><li class="font-bold flex"><a href="/" class="ml-2 font-bold text-xl flex">ðŸ’¬ <!-- -->Open Chat Interface</a></li><span class="flex md:hidden"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2e:" data-state="closed" class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu flex md:hidden h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line>Menu Icon</svg></button></span><nav class="hidden md:flex gap-2"><a href="/" class="text-[17px] inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2">ðŸ”™</a></nav><div class="hidden md:flex gap-2 justify-center content-center items-center"><a href="https://github.com/tbscode/django-vike-chat" target="_blank" class="border inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 h-9 px-4 py-2"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-2 w-5 h-5"><path d="M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Github</a><a href="/login" class="border inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2">ðŸš€ Log-In</a><select class="select select-sm w-full"><option value="light" selected="">light</option><option value="dark">dark</option><option value="cupcake">cupcake</option><option value="retro">retro</option></select></div></ul></div><div class="absolute left-0 top-full flex justify-center"></div></nav></header><div class="border-b"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[320px_minmax(0,1fr)] md:text-xl lg:gap-10"><aside class="fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.7rem)] w-full shrink-0 md:sticky md:block bg-base-200 rounded-xl"><div dir="ltr" class="h-full py-6 pl-8 pr-6 lg:py-8" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><div class="w-full"><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 font-semibold">Getting Started</h4><div class="grid grid-flow-row auto-rows-max"><a href="/docs/" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Introduction</a><a href="/docs/dev-docker" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Docker Development</a><a href="/docs/dev-local" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Local Installation</a><a href="/docs/helm-deployment" class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:underline text-muted-foreground" target="" rel="">Helm deployment</a></div></div></div></div></aside><div class="article prose pt-10"><h1>Helm deployment</h1>
<p>Backend &amp; Frontend can be deployed seperately but a current image url for both must be provided.</p>
<h2>Locally using <code>microk8s</code></h2>
<p>Make sure you have <a href="https://microk8s.io/docs/getting-started">setup &amp; installed</a> <code>microk8s</code>.</p>
<blockquote>
<p>We utelize microk8s for easly local developement to work with managed k8s ( AKS or EKS ) you may need to add extra annotations to the ingress or add a loadbalancer.
But for small scale deployment microk8s can also work <a href="https://blog.t1m.me/blog/microk8s-on-vps">checkout tim&#x27;s blog post on how this can be set-up</a></p>
</blockquote>
<h3>Build &amp; Install Helm</h3>
<ol>
<li>Setup the env, <code>vim .env</code></li>
</ol>
<pre><code class="language-bash">IMAGE_PREFIX=&quot;localhost:32000/open-chat-&quot;
IMAGE_TAG=&quot;latest&quot;
</code></pre>
<ol start="2">
<li>Build Backend &amp; Frontend</li>
</ol>
<pre><code class="language-bash">docker compose -f docker-compose.pro.yaml build
</code></pre>
<ol start="3">
<li>Push to local micok8s registry</li>
</ol>
<p>Setup and install microk8s on your system, then:</p>
<pre><code class="language-bash">microk8s enable registry
docker compose -f docker-compose.pro.yaml push
</code></pre>
<ol start="4">
<li>Check default helm <code>values.yaml</code> ( should be good to go )</li>
</ol>
<pre><code class="language-bash">microk8s helm install -f ./helm/values.yaml open-chat ./helm
</code></pre>
<h4>Deploying services individually</h4>
<p>Currently <code>frontend</code> &amp; <code>backend</code> services may be deployed seperately.</p>
<ol>
<li>Build &amp; Push only one service</li>
</ol>
<pre><code class="language-bash">docker compose -f docker-compose.pro.yaml &lt;service-name&gt; build
docker compose -f docker-compose.pro.yaml &lt;service-name&gt; push
</code></pre>
<ol start="2">
<li>Update OR retrieve the current helm <code>values.yaml</code></li>
</ol>
<p>Either edit <code>helm/values.yaml</code> to include you already deployed images.
Or retrieve the current image url&#x27;s:</p>
<pre><code class="language-bash">microk8s helm get values open-chat -o yaml &gt; ./helm/values.yaml
</code></pre>
<ol start="3">
<li>Update the image url in <code>helm/values.yaml</code> and install the service</li>
</ol>
<pre><code class="language-bash">microk8s helm upgrade -f ./helm/values.yaml open-chat ./helm
</code></pre>
<h3>Uninstall Helm</h3>
<pre><code class="language-bash">microk8s helm uninstall open-chat
</code></pre></div></div></div></div>
        <script id="vike_pageContext" type="application/json">{"pageProps":"!undefined","routeParams":{"page":"helm-deployment"},"initalReduxState":{"frontend":{"theme":"light","sessionId":false,"xcsrfToken":"!undefined","routeParams":{"page":"helm-deployment"}},"pageProps":{"routeParams":{"page":"helm-deployment"},"search":{}}},"search":"!undefined","abortReason":"!undefined","_urlRewrite":null,"_urlRedirect":"!undefined","abortStatusCode":"!undefined","_abortCall":"!undefined","_pageContextInitIsPassedToClient":"!undefined","_pageId":"/pages/docs/@page","data":"!undefined"}</script>
        <script src="https://tbscode.github.io/django-vike-chat/assets/entries/entry-client-routing.11b288c6.js" type="module" async></script>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/entries/pages_docs_-page.52f42ca0.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-f16ca5d8.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-a2378650.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-d2ff8b6e.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-1b255e21.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-b3511bc0.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://tbscode.github.io/django-vike-chat/assets/chunks/chunk-54be2a6f.js" as="script" type="text/javascript" crossorigin>
      </body>
    </html>